<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="canonical" href="https://pakistanaddress.github.io/html/category/article-2260.htm" />
<title>Mr.Alright&#8212;使用AndroidStudio断点调试安卓源码 - Pakistan Address</title>
<!-- for-mobile-apps -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="icon" href="/assets/addons/xcblog/img/pakistanaddress/favicon.ico" type="image/x-icon"/>
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
		function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- //for-mobile-apps -->
<link href="/assets/addons/xcblog/css/pakistanaddress/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<link href="/assets/addons/xcblog/css/pakistanaddress/style.css" rel="stylesheet" type="text/css" media="all" />
<!-- js -->
<script type="text/javascript" src="/assets/addons/xcblog/js/frontend/pakistanaddress/jquery-2.1.4.min.js"></script>
<!-- //js -->
<link href='https://fonts.googleapis.com/css?family=Maven+Pro:400,500,700,900' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
<!-- start-smoth-scrolling -->
<script type="text/javascript">
	jQuery(document).ready(function($) {
		$(".scroll").click(function(event){		
			event.preventDefault();
			$('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
		});
	});
</script>
<!-- start-smoth-scrolling -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?21f4e50ed805b3a1bd1374e6b345c04a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body>
    <!-- header -->
	<div class="header" id="ban">
		<div class="container">
			<div class="w3ls_logo">
								<a href="/">Pakistan Address</a>
							</div>
			<div class="header_right">
			<nav class="navbar navbar-default">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse nav-wil" id="bs-example-navbar-collapse-1">
					<nav class="link-effect-7" id="link-effect-7">
						<ul class="nav navbar-nav">
														<li><a href="/">首页</a></li>
														<li><a href="/html/category/">文章分类</a></li>
														<li><a href="#">关于</a></li>
							<li><a href="#">联系</a></li>
						</ul>
					</nav>
				</div>
				<!-- /.navbar-collapse -->
			</nav>
			</div>
			<div class="clearfix"> </div>
		</div>
	</div>
<!-- //header -->
    <!-- about -->
    <div class="about">
        <div class="container">
            <h1 style="word-break: break-all;">Mr.Alright&#8212;使用AndroidStudio断点调试安卓源码</h1>
            <ul>
                <li><a href="/">首页</a><i>|</i></li>
                <li><a href="/html/category/">文章分类</a><i>|</i></li>
                <li>正文</li>
            </ul>
        </div>
    </div>
    <!-- //about -->
    <!-- single -->
    <div class="single">
        <div class="container">
            <div class="col-md-9">
                <div class="wthree_single_grid1">
                      				  				  				<div id="content_views" class="htmledit_views"> <p>我为甚要用AS来调试安卓源码呢？来自尼克杨的疑问</p> <p>当然是因为爽啦！之前都是开发app，后面接触到了修改系统源码，App调试的时候可以断点调试，省去了一部分加log的麻烦，所以希望源码也可以这样，于是有了下面方案。</p> <p>1.首先你要有系统源码，还要有linux的环境，至于源码的下载，linux的安装配置，大家先问下度娘</p> <p>2.上面的环境配置好之后，执行</p> <pre><code>source build/envsetup.sh</code></pre> <p>初始化了一些函数，接着执行</p> <pre><code>make idegen -j32</code></pre> <p>执行完这个，会生成idegen.jar ，接着执行</p> <pre><code>sh ./development/tools/idegen/idegen.sh</code></pre> <p>执行完这个就会生成，AS需要的一些文件 android.ipr、android.iml</p> <p>android.ipr：通常是保存工程编译器配置，入口，相关LIBRARIES等配置</p> <p>android.iml：主要描述了modules的路径，依赖关系等</p> <p>3.到这里，双击android.ipr 就可以用AS打开项目了，但是如果真的要直接打开，AS会加载的非常慢，毕竟安卓源码是非常庞大的，所以需要对android.iml处理，只添加我们需要的目录即可，下面简单介绍下android.iml的标签，之后会上传一份模板</p> <p>关于&lt;sourceFolder&gt;标签：</p> <p>通需要的文件添加到这里面，其他的删除，如package、framework<br /> &lt;sourceFolder url="file://$MODULE_DIR$/packages" isTestSource="false" /&gt;<br /> &lt;sourceFolder url="file://$MODULE_DIR$/frameworks" isTestSource="false" /&gt;</p> <p>关于&lt;excludeFolder&gt;标签：</p> <p>exclude顾名思义就是不包含的意思，不需要的添加到这里面，如vendor、external</p> <p>&lt;excludeFolder url="file://$MODULE_DIR$/vendor" /&gt;</p> <p>&lt;excludeFolder url="file://$MODULE_DIR$/external" /&gt;</p> <p>关于&lt;orderEntry&gt;标签：</p> <p>保留这两个就可以了</p> <p>&lt;orderEntry type="sourceFolder" forTests="false" /&gt;</p> <p>&lt;orderEntry type="jdk" jdkName="Android API 24 Platform" jdkType="Android SDK" /&gt;</p> <pre><code class="language-XML">android.iml &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;module version="4" relativePaths="true" type="JAVA_MODULE"&gt;   &lt;component name="FacetManager"&gt;     &lt;facet type="android" name="Android"&gt;       &lt;configuration /&gt;     &lt;/facet&gt;   &lt;/component&gt;   &lt;component name="ModuleRootManager" /&gt;   &lt;component name="NewModuleRootManager" inherit-compiler-output="true"&gt;     &lt;exclude-output /&gt;     &lt;content url="file://$MODULE_DIR$"&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/packages/apps/Launcher3" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/packages/wallpapers/LivePicker" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/vendor/mediatek/proprietary/packages/apps/SystemUI" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/frameworks/base/services" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/frameworks/base/core/java" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/frameworks/base/core/res" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/frameworks/base/packages/SystemUI" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/frameworks/libs/systemui" isTestSource="false" /&gt;       &lt;sourceFolder url="file://$MODULE_DIR$/gen" isTestSource="false" generated="true" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/.repo" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/FeatrueTableSpec" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/abi" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/apps" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/art" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/bionic" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/bootable" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/build" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/ccu_tool" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/compatibility" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/cts" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/dalvik" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/developers" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/development" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/device" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/docs" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/external" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/frameworks" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/hardware" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/kernel" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/kernel-3.18" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/kernel-4.4" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/kernel-4.19" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/kernel-4.19-lc" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/kernel-4.14" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/libcore" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/libnativehelper" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/ndk" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/out" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/packages" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/pdk" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/phoenix" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/platform_testing" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/prebuilt" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/prebuilts" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/res" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/sdk" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/system" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/test" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/toolchain" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/tools" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/trusty" /&gt;       &lt;excludeFolder url="file://$MODULE_DIR$/vendor" /&gt;     &lt;/content&gt;     &lt;orderEntry type="sourceFolder" forTests="false" /&gt;     &lt;orderEntry type="jdk" jdkName="Android API 30 Platform" jdkType="Android SDK" /&gt;   &lt;/component&gt; &lt;/module&gt;</code></pre> <p>这样AS的只会去索引你添加的sourceFolder ，其他的都不添加，就会快了很多</p> <p>4.该文件在AS安装目录下面，bin文件夹下<br /> 64位的修改studio64.exe.vmoptions、32位的修改studio.exe.vmoptions<br /> -Xms1024m 修改这个，表示的是分配给studio的内存大小<br /> -Xmx1280m</p> <p>5.打开AS，选择open exist...,选择刚生成的android.ipr<br /> 这时候会快很多，因为好多索引我们都去除了，如果需要，再添加回来就是了<br /> 等待漫长的indexing...</p> <p>6.添加一个安卓app，选择要调试的进程即可</p> <p><img fetchpriority="high" decoding="async" src="http://img.555519.xyz/uploads3/20220708/a748c60aa0a36803d3167bd0f0b4c0d7.jpg" alt="Mr.Alright---使用AndroidStudio断点调试安卓源码"></p> <p><img decoding="async" src="http://img.555519.xyz/uploads3/20220708/35d2d3e7cb2169ee1e70a3c851b251b8.jpg" alt="Mr.Alright---使用AndroidStudio断点调试安卓源码"></p> <p>8.最终效果如下图，比如我调试的是系统的launcher3</p> <p><img decoding="async" src="http://img.555519.xyz/uploads3/20220708/420252b935e552bb53e8d2f396dbee3f.jpg" alt="Mr.Alright---使用AndroidStudio断点调试安卓源码"></p> </div> 			                </div>
                <div class="col-md-12 mt-5">
                                        <p>上一个：<a href="/html/category/article-2259.htm">使用SpringCache进行缓存数据库查询</a></p>
                                        <p>下一个：<a href="/html/category/article-2261.htm">kubectl 远程访问内网中的 kubernetes 集群</a></p>
                                    </div>
                            </div>
            <div class="col-md-3">
                <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/html/category/article-6814.htm" title="国外动物疫苗知名企业排名（国外动物疫苗知名企业排名第一）">国外动物疫苗知名企业排名（国外动物疫苗知名企业排名第一）</a></li>
                        <li class="py-2"><a href="/html/category/article-6815.htm" title="靳东个人资料简介简历（山楂树之恋演员）速看，">靳东个人资料简介简历（山楂树之恋演员）速看，</a></li>
                        <li class="py-2"><a href="/html/category/article-6861.htm" title="小孩不知道是不是被猫抓伤需要***吗（不确定小孩是不是被猫抓了能打狂犬疫苗）">小孩不知道是不是被猫抓伤需要***吗（不确定小孩是不是被猫抓了能打狂犬疫苗）</a></li>
                        <li class="py-2"><a href="/html/category/article-7550.htm" title="大兴24小时宠物医院（大兴宠物医院电话号码）">大兴24小时宠物医院（大兴宠物医院电话号码）</a></li>
                        <li class="py-2"><a href="/html/category/article-7597.htm" title="澜沧县中医院电话(澜沧县中医院有几个科室)">澜沧县中医院电话(澜沧县中医院有几个科室)</a></li>
                        <li class="py-2"><a href="/html/category/article-6014.htm" title="国内宠物粮上市公司有哪些公司（宠物主粮上市公司）">国内宠物粮上市公司有哪些公司（宠物主粮上市公司）</a></li>
                        <li class="py-2"><a href="/html/category/article-7366.htm" title="北京宠物店投资多少钱啊（在北京开一家宠物店能赚钱吗）">北京宠物店投资多少钱啊（在北京开一家宠物店能赚钱吗）</a></li>
                        <li class="py-2"><a href="/html/category/article-7137.htm" title="动物疫苗的正确使用方法图片（动物疫苗接种方法有哪些）">动物疫苗的正确使用方法图片（动物疫苗接种方法有哪些）</a></li>
                        <li class="py-2"><a href="/html/category/article-7229.htm" title="动物疫苗有哪些大厂家打（动物疫苗的上市公司有哪些）">动物疫苗有哪些大厂家打（动物疫苗的上市公司有哪些）</a></li>
                        <li class="py-2"><a href="/html/category/article-7183.htm" title="2020年开宠物店怎么样（2020年开宠物店怎么样了）">2020年开宠物店怎么样（2020年开宠物店怎么样了）</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">26</span> <a href="/html/date/2024-08/" title="2024-08 归档">2024-08</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-07/" title="2024-07 归档">2024-07</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">60</span> <a href="/html/date/2024-06/" title="2024-06 归档">2024-06</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-05/" title="2024-05 归档">2024-05</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">60</span> <a href="/html/date/2024-04/" title="2024-04 归档">2024-04</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-03/" title="2024-03 归档">2024-03</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">44</span> <a href="/html/date/2024-02/" title="2024-02 归档">2024-02</a></h4>
            </li>
                    </ul>
    </div>
</div>

            </div>
        </div>
    </div>
    <!-- //single -->
    <!-- footer -->
	
	<div class="copy-right-social">
		<div class="container">
			<div class="footer-pos">
				<a href="#ban" class="scroll"><img src="/assets/addons/xcblog/img/pakistanaddress/arrow.png" alt=" " class="img-responsive" /></a>
			</div>
            <div class="col-lg-8 footer-left">
                <p class="m-0">Pakistan Address 版权所有</p>
            </div>
			<div class="copy-right-social1">
				<div class="w3l_social_icons w3l_social_icons1">
					<ul>
						<li><a href="#" class="facebook"></a></li>
						<li><a href="#" class="twitter"></a></li>
						<li><a href="#" class="google_plus"></a></li>
						<li><a href="#" class="pinterest"></a></li>
						<li><a href="#" class="instagram"></a></li>
					</ul>
				</div>
			</div>
			<div class="clearfix"> </div>
		</div>
	</div>
<!-- //footer -->
<!-- for bootstrap working -->
	<script src="/assets/addons/xcblog/js/frontend/pakistanaddress/bootstrap.js"></script>
    <script>
    $(function() {
        $('.js_to').click(function() {
            var url = $(this).data('url');
            var code = $(this).data('code');
            url += code;

            window.open(url);
        })
    });
    </script>
</body>

</html>